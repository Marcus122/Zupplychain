<div data-view="main" class="dashboard-container columns ten">
	<!--<%if(completedTasks.allWarehousesCompleted === false && authorisations.tasks === true){%>
		<div class="columns twelve">
			<div class="content-box secondary tasks-box">
				<div class="header">
					<h3>Contact Setup</h3>
                    <a href="/contacts-setup" class="button action">View Contacts Setup</a>
				</div>
				<div class="main row">
				</div>
			</div>
		</div>
	<%}%>-->
    <div class="columns twelve">
        <div class="content-box secondary tasks-box">
            <div class="header">
			     <h3>Registration - <%if(warehouse){%><%=warehouse.name%><%}else{%>First Warehouse<%}%></h3>
            </div>
            <div class="main row">
                <p>To ensure your warehouse is included in search results, please complete steps 1 - 3. Step 4 will be available soon!</p>
                <button class="button mini action" data-url="videos/Zupplychain-Registration-Animation.mp4" data-action="view-reg-example">Help Video</button>
                <table class="dashboard-table">
                    <thead>
                        <tr>
                            <th>Steps</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="no-link task-name">Initial Registration</td>
                            <td class="no-link complete">
                                COMPLETED
                             </td>
                        </tr>
                        <tr>
                            <td class="task-name">
                                <%if(!warehouse){%>
                                    <a href="/provider-registration-1">Step 1: Your Warehouse Details</a>
                                <%}else{%>
                                    Step 1: Your Warehouse Details
                                <%}%>
                            </td>
                            <td <%if(warehouse){%>class="no-link"<%}%>>
                            <%if(warehouse){%>
                                <p class="complete">COMPLETED</p>
                             <%}else{%>
                                <a href="/provider-registration-1" class="task-status not-started">START NOW!</a>
                              <%}%>
                              </td>
                        </tr>
                        <tr>
                            <td class="task-name <%if(!warehouse){%>disabled<%}%>">
                                <%if(!warehouse){%>
                                    Step 2: Your Storage Details
                                <%}else{
                                    if(warehouse.storage && warehouse.storage.length > 0){%>
                                        Step 2: Your Storage Details
                                    <%}else{%>
                                        <a href="/provider-registration-2">Step 2: Your Storage Details</a>
                                    <%}%>
                                <%}%>
                            </td>
                            <td <%if(!warehouse){%> class="disabled <%if(warehouse && warehouse.storage && warehouse.storage.length > 0){%> no-link <%}%>" <%}%> <%if(warehouse && warehouse.storage && warehouse.storage.length > 0){%> class="no-link" <%}%>>
                             <%
                             if(!warehouse){%>
                                PENDING
                             <%}else
                             if(!warehouse && (!warehouse.storage || warehouse.storage.length === 0)){%>
                                 <a href="/provider-registration-2" class="task-status complete">START NOW!</a>
                             <%}else
                             if(warehouse && warehouse.storage && warehouse.storage.length > 0){%>
                                 <p class="complete">COMPLETED</p>
                             <%}else{%>
                                <a href="/provider-registration-2" class="task-status not-started">START NOW!</a>
                              <%}%></td>
                        </tr>
                        <tr>
                            <%anchorAdded=false;
                            var storagesComplete = 0;
                            var storagesPartiallyComplete = 0;
                            var pending = false%>
                            <%if((!warehouse) || (warehouse && warehouse.storage && warehouse.storage.length === 0)){
                                pending = true;%>
                            <%}else{
                                if(warehouse && warehouse.storage && warehouse.storage.length > 0){
                                    for (var i = 0; i<warehouse.storage.length; i++){
                                        if(warehouse.storage[i].basicPricing && warehouse.storage[i].basicPricing.price > 0 && warehouse.storage[i].basicPricing.charge > 0){
                                            if(warehouse.storage[i].pallets[0].free != null){%>
                                                <%storagesComplete ++;%>
                                            <%}else{%>
                                                <%storagesPartiallyComplete ++;%>
                                            <%}%>
                                        <%}else if(warehouse.storage[i].pallets[0]){%>
                                            <%storagesPartiallyComplete ++;%>
                                        <%}else{%>
                                            <%if(anchorAdded === false){
                                                
                                            }%>
                                            <%anchorAdded = true%>
                                        <%}
                                    }%> 
                                <%}else{%>
                                    <%if(anchorAdded === false){
                                        
                                    }%>
                                    <%anchorAdded = true%>
                                <%}%>
                            <%}%>
                            <td class="task-name <%if((!warehouse) || (warehouse && warehouse.storage && warehouse.storage.length === 0)){%>disabled<%}%>">
                                <%if((!warehouse) || (warehouse && warehouse.storage && warehouse.storage.length === 0) || pending || storagesComplete === warehouse.storage.length){%>
                                    Step 3: Your Pricing and Availability
                                <%}else{%>
                                    <a href="/provider-registration-3">Step 3: Your Pricing and Availability</a>
                                <%}%>
                            </td>
                            <td <%if((!warehouse) || (warehouse && warehouse.storage && warehouse.storage.length === 0)){%>class="disabled"<%}%> <%if(warehouse && storagesComplete === warehouse.storage.length || pending){%> class="no-link"<%}%>>
                                <%if(pending){%>
                                    PENDING
                                <%}else
                                if(storagesComplete === warehouse.storage.length){%>
                                    <p class="complete">COMPLETED</p>
                                <%}else
                                if(storagesComplete === 0 && storagesPartiallyComplete === 0){%>
                                    <a class="task-status not-started" href="/provider-registration-3">START NOW!</a>
                                <%}else
                                    if((storagesComplete > 0 && storagesPartiallyComplete === 0) || (storagesPartiallyComplete > 0)){%>
                                        <a href="/provider-registration-3" class="task-status partially-complete">PARTIALLY COMPLETE</a>
                                    <%}else
                                %>
                          </td>
                        </tr>
                        <tr>
                            <td class="no-link task-name">Step 4: Your Contacts and Authorisations</td>
                            <td class="no-link comming-soon">COMING SOON</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
	<%if (dashboardAccessLvl === 0 || dashboardAccessLvl === 1){%>
		<div class="row types first-row">
			<div class="columns six tile-main">
				<button data-href="#admin" class="button tile-button">
					<div class="secondary content-box">
						<div class="header">
							<h3>Account</h3>
						</div>
						<div class="main row">
							<div class="columns four">
								<img src="/images/admin-icon-dashboard.png" alt="Admin" width="103" height="103"/>
							</div>
							<p class="columns eight">View and edit your account details</p>
						</div>
					</div>
				</button>
			</div>
			<div class="columns six tile-main">
				<button data-href="#contacts" class="button tile-button">
					<div class="secondary content-box">
						<div class="header">
							<h3>Contacts</h3>
						</div>
						<div class="main row">
							<div class="columns four">
								<img src="/images/contacts-icon-dashboard.png" alt="Contacts" width="103" height="103"/>
							</div>
							<p class="columns eight">Coming Soon</p>
						</div>
					</div>
				</button>
			</div>
		</div>
		<div class="row types dashboard-access-level-<%=dashboardAccessLvl%>">
			<div class="columns six tile-main">
				<button data-href="#warehouses" class="button tile-button">
					<div class="secondary content-box">
						<div class="header">
							<h3>Warehouses</h3>
						</div>
						<div class="main row">
							<div class="columns four">
								<img src="/images/warehouse-icon-dashboard.png" alt="Warehouse Details" width="103" height="103"/>
							</div>
							<p class="columns eight">View and edit your warehouse details and ammend pricing and availability</p>
							<p class="columns eight">Add additional warehouses</p>
						</div>
					</div>
				</button>
			</div>
			<div class="columns six tile-main">
				<button data-href="#messages" class="button tile-button">
					<div class="secondary content-box">
						<div class="header">
							<h3>Messages</h3>
						</div>
						<div class="main row">
							<div class="columns four">
								<img src="/images/user-icon-dashboard.png" alt="Users"/>
							</div>
							<p class="columns eight">View your messages</p>
						</div>
					</div>
				</button>
			</div>
		</div>
	<%}else{%>
		<div class="row types first-row dashboard-access-level-2">
			<div class="columns six tile-main">
				<button data-href="#admin" class="button tile-button">
					<div class="secondary content-box">
						<div class="header">
							<h3>Account</h3>
						</div>
						<div class="main row">
							<div class="columns four">
								<img src="/images/admin-icon-dashboard.png" alt="Admin" width="103" height="103"/>
							</div>
							<p class="columns eight">View and edit your account details</p>
						</div>
					</div>
				</button>
			</div>
			<div class="columns six tile-main">
				<button data-href="#messages" class="button tile-button">
					<div class="secondary content-box">
						<div class="header">
							<h3>Messages</h3>
						</div>
						<div class="main row">
							<div class="columns four">
								<img src="/images/user-icon-dashboard.png" alt="Users"/>
							</div>
							<p class="columns eight">View your messages</p>
						</div>
					</div>
				</button>
			</div>
		</div>
		<div class="row types dashboard-access-level-2">
			<div class="columns six tile-main">
				<button data-href="#contacts" class="button tile-button">
					<div class="secondary content-box">
						<div class="header">
							<h3>Contacts</h3>
						</div>
						<div class="main row">
							<div class="columns four">
								<img src="/images/contacts-icon-dashboard.png" alt="Contacts" width="103" height="103"/>
							</div>
							<p class="columns eight">Coming Soon</p>
						</div>
					</div>
				</button>
			</div>
		</div>
	<%}%>
</div>
<script type="text/template"" id="video-popup">
	<%include ../video-popup%>
</script>